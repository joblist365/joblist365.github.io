<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jobpatra — Company & Career Explorer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="brand">
        <div class="logo">JP</div>
        <div>
          <h1>Jobpatra</h1>
          <p class="tagline">India’s Company & Career Explorer</p>
        </div>
      </div>
    </div>
  </header>

  <main class="container main">
    <section class="search-section">
      <div class="row">
        <input id="stateInput" placeholder="Search state..." class="input" />
        <input id="cityInput" placeholder="Search city..." class="input" />
      </div>
      <div class="row">
        <input id="sectorInput" placeholder="Search sector..." class="input" />
        <input id="companyInput" placeholder="Search company or role..." class="input" />
      </div>
      <div class="row actions">
        <button id="searchBtn" class="btn primary">Search</button>
        <button id="resetBtn" class="btn">Reset</button>
      </div>
    </section>

    <section id="results" class="results">
      <!-- Results will render here -->
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <small>© Jobpatra — Built for careers. Simple, clean & offline-ready demo.</small>
    </div>
  </footer>

<script>
const DATA = {
  "states": [
    {
      "name": "Karnataka",
      "cities": [
        {
          "name":"Bengaluru",
          "sectors":[
            {
              "sector":"IT & Software",
              "companies":[
                {"id":"cmp0001","name":"Infosys Ltd","website":"https://www.infosys.com/careers/","linkedin":"https://www.linkedin.com/company/infosys/","jobs_offered":["Software Engineer","QA Engineer","Data Scientist"]},
                {"id":"cmp0002","name":"Wipro Ltd","website":"https://careers.wipro.com/","linkedin":"https://www.linkedin.com/company/wipro/","jobs_offered":["Developer","Technical Support","Business Analyst"]}
              ]
            }
          ]
        }
      ]
    }
  ]
};

function qs(id){return document.getElementById(id);}

function renderResults(list){
  const out = qs('results');
  out.innerHTML = '';
  if(!list || list.length===0){
    out.innerHTML = '<div class="empty">No companies found. Try wider filters.</div>';
    return;
  }
  list.forEach(c => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="card-left">
        <div class="thumb">${c.name.charAt(0)}</div>
      </div>
      <div class="card-body">
        <div class="card-title">${c.name}</div>
        <div class="card-meta">${c.sector} • ${c.city}, ${c.state}</div>
        <div class="card-desc">Roles: ${(c.jobs_offered||[]).slice(0,6).join(', ')}</div>
        <div class="card-actions">
          ${c.website ? `<a class="btn small" href="${c.website}" target="_blank">Careers</a>` : ''}
          ${c.linkedin ? `<a class="btn small" href="${c.linkedin}" target="_blank">LinkedIn</a>` : ''}
        </div>
      </div>
    `;
    out.appendChild(card);
  });
}

function buildIndex(){
  const companies = [];
  (DATA.states||[]).forEach(s => {
    (s.cities||[]).forEach(ci => {
      (ci.sectors||[]).forEach(se => {
        (se.companies||[]).forEach(co => {
          companies.push(Object.assign({}, co, {state: s.name, city: ci.name, sector: se.sector}));
        });
      });
    });
  });
  return companies;
}

const INDEX = buildIndex();

function doSearch(){
  const st = qs('stateInput').value.trim().toLowerCase();
  const city = qs('cityInput').value.trim().toLowerCase();
  const sector = qs('sectorInput').value.trim().toLowerCase();
  const company = qs('companyInput').value.trim().toLowerCase();
  let results = INDEX.filter(c => {
    if(st && !c.state.toLowerCase().includes(st)) return false;
    if(city && !c.city.toLowerCase().includes(city)) return false;
    if(sector && !c.sector.toLowerCase().includes(sector)) return false;
    if(company){
      if(c.name.toLowerCase().includes(company)) return true;
      const roles = (c.jobs_offered||[]).join(' ').toLowerCase();
      if(roles.includes(company)) return true;
      return false;
    }
    return true;
  });
  renderResults(results);
}

qs('searchBtn').addEventListener('click', doSearch);
qs('resetBtn').addEventListener('click', () => {
  qs('stateInput').value=''; qs('cityInput').value=''; qs('sectorInput').value=''; qs('companyInput').value=''; renderResults([]);
});
renderResults([]);
</script>
</body>
</html>
