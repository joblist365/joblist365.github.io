<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JobList365 â€“ Search Results</title>

  <!-- âœ… Google Verification -->
  <meta name="google-site-verification" content="your-unique-code-here" />

  <!-- âœ… Basic SEO -->
  <meta name="description" content="JobList365 helps you discover verified company career pages, jobs, and hiring opportunities across India. Explore healthcare, IT, education, and more sectors.">
  <meta name="keywords" content="JobList365, jobs in India, verified company jobs, Indian companies hiring, IT jobs, healthcare jobs, government jobs, startup jobs">
  <meta name="author" content="JobList365">
  <meta name="robots" content="index, follow">

  <!-- âœ… Open Graph -->
  <meta property="og:title" content="JobList365 â€“ Find Real Jobs from Real Companies">
  <meta property="og:description" content="Explore genuine job openings directly from verified company career pages across India.">
  <meta property="og:image" content="https://joblist365.github.io/logo.png">
  <meta property="og:url" content="https://joblist365.github.io/results.html">
  <meta property="og:type" content="website">

  <!-- âœ… Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="JobList365 â€“ Find Real Jobs from Real Companies">
  <meta name="twitter:description" content="Discover genuine jobs from official company career pages in India.">
  <meta name="twitter:image" content="https://joblist365.github.io/logo.png">

  <!-- âœ… Favicon -->
  <link rel="icon" href="logo.png" type="image/png">

  <!-- âœ… Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1948921365546153"
     crossorigin="anonymous"></script>

  <!-- âœ… CSV Parser -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f5f9ff; margin: 0; }
    header { background: #1976d2; color: white; padding: 15px; text-align: center; font-size: 1.5rem; }
    .container { max-width: 1000px; margin: 20px auto; padding: 20px; background: white;
                 border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .company { border-bottom: 1px solid #eee; padding: 15px 0; }
    .company:last-child { border: none; }
    .company h3 { margin: 0; color: #0d47a1; }
    .meta { color: #555; margin: 4px 0 8px; font-size: 0.9rem; }
    .roles { margin-top: 8px; }
    .role-item { margin: 6px 0; display: flex; align-items: center; flex-wrap: wrap; }
    .role-title { flex: 1; }
    .apply-btn {
      background: #1976d2; color: white; border: none; padding: 6px 12px;
      border-radius: 6px; text-decoration: none; font-size: 0.9rem;
      transition: background 0.2s; margin-left: 6px;
    }
    .apply-btn:hover { background: #0d47a1; }
    footer { text-align: center; color: #777; padding: 20px; font-size: 0.9rem; }
  </style>
</head>

<body>
  <header>ðŸ’¼ JobList365 â€“ Search Results</header>

  <div class="container" id="results">Loading results...</div>

  <footer>Â© 2025 JobList365 | <a href="index.html">Back to Search</a></footer>

  <script>
  const CSV_FILE = "data.csv";

  function getQueryParams() {
    const params = new URLSearchParams(window.location.search);
    return {
      sector: params.get("sector") || "",
      state: params.get("state") || "",
      city: params.get("city") || ""
    };
  }

  function cleanText(v) { return (v || "").trim(); }

  async function loadCsv() {
    try {
      const res = await fetch(CSV_FILE, { cache: "no-store" });
      const text = await res.text();
      const parsed = Papa.parse(text, { header: true });
      return parsed.data.filter(r => r.Company && r.Sector);
    } catch (e) {
      console.error("Error loading CSV", e);
      return [];
    }
  }

  function renderResults(data) {
    const container = document.getElementById("results");
    if (data.length === 0) {
      container.innerHTML = "<p>No matching results found.</p>";
      return;
    }

    container.innerHTML = data.map(row => {
      const roles = cleanText(row.Roles);
      let roleHtml = "<p>No roles listed</p>";

      if (roles) {
        const roleItems = roles.split(";").map(r => r.trim()).filter(Boolean);
        roleHtml = roleItems.map(item => {
          if (item.includes("â†’ http")) {
            const [title, link] = item.split("â†’").map(x => x.trim());
            return `<div class="role-item">
                      <span class="role-title">${title}</span>
                      <a href="${link}" target="_blank" class="apply-btn">Apply Now</a>
                    </div>`;
          } else {
            return `<div class="role-item">${item}</div>`;
          }
        }).join("");
      }

      return `
        <div class="company">
          <h3>${row.Company}</h3>
          <div class="meta">${row.Sector || ""} ${row.State ? "â€¢ " + row.State : ""} ${row.City ? "â€¢ " + row.City : ""}</div>
          <div class="roles">${roleHtml}</div>
          ${row.Website ? `<p><a href="${row.Website}" target="_blank">${row.Website}</a></p>` : ""}
        </div>
      `;
    }).join("");
  }

  document.addEventListener("DOMContentLoaded", async () => {
    const params = getQueryParams();
    const allData = await loadCsv();

    const filtered = allData.filter(row =>
      (!params.sector || row.Sector === params.sector) &&
      (!params.state || row.State === params.state) &&
      (!params.city || row.City === params.city)
    );

    renderResults(filtered);
  });
  </script>
</body>
</html>
